/*! WASTE AD ENGINE - v1.2.0 - 2016-01-06
* Copyright (c) 2016 Waste Creative */
var WASTE=WASTE||{};WASTE.VERSION="v1.2.0",WASTE.dontSayHello=!1,WASTE.Cache=[],WASTE.Objects=[],WASTE.sayHello=function(){if(!WASTE.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var a=["%c %c %c Waste.js "+WASTE.VERSION+"  %c  %c","background: #d2FF00","background: #d2FF00","color: #d2FF00; background: #030307;","background: #d2FF00","background: #d2FF00"];console.log.apply(console,a)}else window.console&&WASTE.trace("Waste.js "+WASTE.VERSION);WASTE.dontSayHello=!0}},WASTE.trace=function(a){console.log(a)},WASTE.setCanvas=function(a,b,c,d,e){var f=c||"#FFFFFF",g=d||"#000000",h=e||0;document.body.style.width=a,document.body.style.height=b,canvas.width=a-2*e,canvas.height=b-2*e,canvas.style.backgroundColor=f,canvas.style.borderStyle="solid",canvas.style.borderColor=g,canvas.style.borderWidth=String(h)+"px"},WASTE.Renderer=function(a,b,c){WASTE.sayHello(),this.width=a||300,this.height=b||250,this.bgColour=c.bgColor||"#FFFFFF",this.borderColor=c.borderColor||"#FFFFFF",this.borderThickness=c.borderThickness||0,this.view=document.getElementById(c.view)||document.querySelector("canvas")||document.createElement("canvas"),this.context=this.view.getContext("2d"),this.stage=new WASTE.Stage,this.interactionManager=new WASTE.InteractionManager(this),this.timeline=new WASTE.Timeline,this.timelines=[],this.timelines.push(this.timeline),this.ready=!1,this.setCanvas()},WASTE.Renderer.prototype.constructor=WASTE.Renderer,WASTE.Renderer.prototype.setCanvas=function(){this.view.width=this.stage.width=this.width,this.view.height=this.stage.height=this.height,this.view.style.backgroundColor=this.bgColour,this.view.style.borderStyle="solid",this.view.style.borderColor=this.borderColor,this.view.style.borderWidth=String(this.borderThickness)+"px"},WASTE.Renderer.prototype.render=function(){if(this.context.clearRect(0,0,this.view.width,this.view.height),this.ready){for(var a in WASTE.Objects)WASTE.Objects[a]._render(this.context);for(var b in this.timelines)this.timelines[b].run()}},WASTE.Renderer.prototype.updatePreload=function(){},WASTE.Renderer.prototype.addTimeline=function(){var a=new WASTE.Timeline;return this.timelines.push(a),a},WASTE.Loader=function(a){this.images=a,this.numLoaded=0,this.progress=0},WASTE.Loader.prototype.constructor=WASTE.Loader,WASTE.Loader.prototype.onComplete=function(){},WASTE.Loader.prototype.getProgress=function(){return this.progress},WASTE.Loader.prototype.load=function(){for(var a in this.images)new WASTE.ImageLoader(this.images[a],this)},WASTE.Loader.prototype.assetLoaded=function(){this.numLoaded++,this.numLoaded===this.images.length?(this.onComplete(),this.progress=1):this.progress=this.numLoaded/this.images.length},WASTE.ImageLoader=function(a,b){this.currentScope=null,this.url=a,this.load(a,b),this.cache=[]},WASTE.ImageLoader.prototype.constructor=WASTE.ImageLoader,WASTE.ImageLoader.prototype.loadHandler=function(){this.scope.currentScope.assetLoaded()},WASTE.ImageLoader.prototype.load=function(a,b){var c,d=!0;if(id=-1,WASTE.Cache.length>0)for(var e in WASTE.Cache)WASTE.Cache[e].url===a&&(d=!1,id=e);d?(c=new Image,c.src=a,c.scope=this,this.currentScope=b,null===b._cacheId&&(b._cacheId=WASTE.Cache.length),c.addEventListener("load",this.loadHandler,!1),WASTE.Cache.push({url:a,id:WASTE.Cache.length,ready:!1,src:c})):b.assetLoaded()},WASTE.Container=function(a){this.type="Object",this.x=0,this.y=0,this.width=0,this.height=0,this.anchor={x:a||0,y:a||0},this.scale=1,this.alpha=1,this.rotation=0,this.visible=!0,this.interactive=!1,this.children=[],this.mask={x:0,y:0,width:0,height:0},this._added=!1,this._parent={visible:!0,rotation:0,_global:{x:0,y:0,_x:0,_y:0,alpha:1,scale:1,scaleW:0,scaleH:0,diffX:0,diffY:0}},this._ready=!0,this._over=!1,this._global={x:0,y:0,_x:0,_y:0,alpha:1,scale:1,scaleW:0,scaleH:0,diffX:0,diffY:0}},WASTE.Container.prototype.constructor=WASTE.Container,WASTE.Container.prototype.hide=function(){this.visible&&(this.visible=!1)},WASTE.Container.prototype.show=function(){this.visible||(this.visible=!0)},WASTE.Container.prototype.addChild=function(a){a._added=!0,a._parent=this,this.children.push(a)},WASTE.Container.prototype.removeChild=function(a){a._added=!1,a._parent=null,this.children.splice(this.children.indexOf(a),1)},WASTE.Container.prototype.setIndex=function(a,b){var c=this.children[this.children.indexOf(a)];this.children.splice(this.children.indexOf(a),1),this.children[b]=c},WASTE.Container.prototype.onClick=function(){},WASTE.Container.prototype.onOver=function(){},WASTE.Container.prototype.onOut=function(){},WASTE.Container.prototype._render=function(a){this._parent.visible&&this.visible&&this._ready&&this._added&&(this._setGlobals(),this._renderObject(a))},WASTE.Container.prototype._setGlobals=function(){var a=this._global,b=this._parent._global;a.alpha=b.alpha*this.alpha,a.scale=b.scale*this.scale,a.scaleW=this.width*a.scale,a.scaleH=this.height*a.scale,a.diffX=a.scaleW*this.anchor.x,a.diffY=a.scaleH*this.anchor.y,a.x=b.x+this.x*b.scale,a.y=b.y+this.y*b.scale,a._x=a.x-a.diffX,a._y=a.y-a.diffY},WASTE.Container.prototype._renderObject=function(a){for(var b in this.children)this.children[b]._render(a)},WASTE.Container.prototype._rotate=function(a,b){0!==b.rotation&&(a.translate(b._global.x,b._global.y),a.rotate(b.rotation*Math.PI/180),a.translate(-1*b._global.x,-1*b._global.y)),b._parent&&this._rotate(a,b._parent)},WASTE.Stage=function(){WASTE.Container.call(this),this.type="Stage",this._added=!0,WASTE.Objects.push(this)},WASTE.Stage.prototype=Object.create(WASTE.Container.prototype),WASTE.Stage.prototype.constructor=WASTE.Stage,WASTE.Sprite=function(a,b){WASTE.Container.call(this,b),this.type="Sprite",this.src=a,this.sourceX=0,this.sourceY=0,this.sourceWidth=0,this.sourceHeight=0,this._ready=!1,this._cacheId=null,this.loadImage()},WASTE.Sprite.prototype=Object.create(WASTE.Container.prototype),WASTE.Sprite.prototype.constructor=WASTE.Sprite,WASTE.Sprite.prototype.loadImage=function(){var a=!1;for(var b in WASTE.Cache){if(!isNaN(this.src)){a=!0,this._cacheId=this.src,this.assetLoaded();break}if(this.src===WASTE.Cache[b].url){a=!0,this._cacheId=b,this.assetLoaded();break}}a||new WASTE.ImageLoader(this.src,this)},WASTE.Sprite.prototype.assetLoaded=function(){this._setPrimatives(WASTE.Cache[this._cacheId].src)},WASTE.Sprite.prototype._setPrimatives=function(a){this.src=a,this._ready=!0;var b=a.width,c=a.height;this.sourceWidth=b,this.sourceHeight=c,this.width=0===this.width?b:0,this.height=0===this.height?c:0},WASTE.Sprite.prototype._renderObject=function(a){var b=this._global,c=this._parent._global;a.globalAlpha=b.alpha;var d=b.x+c.diffX,e=b.y+c.diffY;a.save(),this._rotate(a,this._parent),0!==this.rotaion&&(a.translate(b.x,b.y),a.rotate(this.rotation*Math.PI/180),d=-1*b.diffX,e=-1*b.diffY),0!==this.mask.width&&0!==this.mask.height&&(a.translate(-b.x,-b.y),a.beginPath(),a.rect(this.mask.x,this.mask.y,this.mask.width,this.mask.height),a.clip(),a.translate(b.x,b.y)),this._draw(a,d,e);for(var f in this.children)this.children[f]._render(a);a.restore()},WASTE.Sprite.prototype._draw=function(a,b,c){a.drawImage(this.src,this.sourceX,this.sourceY,this.sourceWidth,this.sourceHeight,~~b,~~c,this._global.scaleW,this._global.scaleH)},WASTE.MovieClip=function(a,b,c,d,e,f){WASTE.Container.call(this,f),this.type="MovieClip",this.src=a,this.sourceX=0,this.sourceY=0,this.sourceWidth=0,this.sourceHeight=0,this._ready=!1,this._cacheId=null,this.img_w=b,this.img_h=c,this.total_frames=d,this.total_columns=e,this.animSpeed=.2,this.loop=!1,this.currentFrame=0,this.playing=!1,this._count=0,this.loadImage()},WASTE.MovieClip.prototype=Object.create(WASTE.Container.prototype),WASTE.MovieClip.prototype.constructor=WASTE.MovieClip,WASTE.MovieClip.prototype.loadImage=function(){var a=!1;for(var b in WASTE.Cache){if(!isNaN(this.src)){a=!0,this._cacheId=this.src,this.assetLoaded();break}if(this.src===WASTE.Cache[b].url){a=!0,this._cacheId=b,this._setPrimatives(WASTE.Cache[b].src);break}}a||new WASTE.ImageLoader(this.src,this)},WASTE.MovieClip.prototype.assetLoaded=function(){this._setPrimatives(WASTE.Cache[this._cacheId].src)},WASTE.MovieClip.prototype._setPrimatives=function(a){this.src=a,this._ready=!0;var b=this.img_w,c=this.img_h;this.sourceWidth=b,this.sourceHeight=c,this.width=0===this.width?b:0,this.height=0===this.height?c:0},WASTE.MovieClip.prototype._renderObject=function(a){var b=this._global,c=this._parent._global;a.globalAlpha=b.alpha;var d=b.x+c.diffX,e=b.y+c.diffY;a.save(),this._rotate(a,this._parent),0!==this.rotaion&&(a.translate(b.x,b.y),a.rotate(this.rotation*Math.PI/180),d=-1*b.diffX,e=-1*b.diffY),0!==this.mask.width&&0!==this.mask.height&&(a.translate(-b.x,-b.y),a.beginPath(),a.rect(this.mask.x,this.mask.y,this.mask.width,this.mask.height),a.clip(),a.translate(b.x,b.y)),this._draw(a,d,e);for(var f in this.children)this.children[f]._render(a);a.restore()},WASTE.MovieClip.prototype._draw=function(a,b,c){this._updateAnimation(),a.drawImage(this.src,this.sourceX,this.sourceY,this.img_w,this.img_h,~~b,~~c,this._global.scaleW,this._global.scaleH)},WASTE.MovieClip.prototype._updateImageSource=function(){this.sourceX=~~(this.currentFrame%this.total_columns)*this.img_w,this.sourceY=~~(this.currentFrame/this.total_columns)*this.img_h},WASTE.MovieClip.prototype._updateAnimation=function(){this._updateImageSource(),this.playing&&(this._count++,this._count===20*this.animSpeed&&(this._count=0,this.currentFrame<this.total_frames-1?this.currentFrame++:this.loop?this.currentFrame=0:this.stop()))},WASTE.MovieClip.prototype.play=function(){this._count=0,this.playing=!0},WASTE.MovieClip.prototype.stop=function(){this.playing=!1},WASTE.MovieClip.prototype.gotoAndPlay=function(a){this.currentFrame=a,this.play()},WASTE.MovieClip.prototype.gotoAndStop=function(a){this.currentFrame=a},WASTE.Textfield=function(a,b,c){WASTE.Container.call(this,c),this.type="Textfield",this.text=a||"",this.font=b||"arial",this.fontSize=16,this.textColor="#000000",this.lineHeight=16,this.alignment="left",this.maxWidth=null},WASTE.Textfield.prototype=Object.create(WASTE.Container.prototype),WASTE.Textfield.prototype.constructor=WASTE.Textfield,WASTE.Textfield.prototype._adjustText=function(a){var b=this.text.split("\n"),c=0,d=[],e=0,f=0,g=this.lineHeight*this._global.scale;if(null!==this.maxWidth){var h="";for(var i in b){var j=b[i].split(" ");for(var k in j){var l=h+j[k]+" ",m=a.measureText(l).width;if(m>this.maxWidth*this._global.scale){d.push([h,e,f]),c++;var n=a.measureText(h).width;this.width<n&&(this.width=n),h=j[k]+" ",f+=g}else h=l}a.measureText(h).width>0&&(d.push([h,e,f]),c++),h="",f+=g}}else for(var o in b){var p=b[o],q=a.measureText(p).width;this.width<q&&(this.width=a.measureText(p).width),d.push([p,e,f]),f+=g,c++}return this.height=g*c,d},WASTE.Textfield.prototype._renderObject=function(a){{var b=this._global;this._parent._global}a.save();var c=this.fontSize*b.scale;b.scaleW=this.width,b.scaleH=this.height,b.diffX=b.scaleW*this.anchor.x,b.diffY=b.scaleH*this.anchor.y-c,a.globalAlpha=b.alpha,a.font="normal "+String(c)+"px '"+this.font+"'",a.fillStyle=this.textColor,a.textBaseline="alphabetic",a.textAlign=this.alignment;var d=this._adjustText(a),e=b.x-b.diffX,f=b.y-b.diffY;this._rotate(a,this._parent),a.translate(0,0),a.translate(e,f);var g=0;"center"===this.alignment?g=this.width>>1:"right"===this.alignment&&(g=this.width),b.diffX-=g,a.translate(g,0),0!==this.rotation&&(a.translate(b.diffX,b.diffY),a.rotate(this.rotation*Math.PI/180),a.translate(-1*b.diffX,-1*b.diffY)),0!==this.mask.width&&0!==this.mask.height&&(a.translate(-b.x,-b.y),a.beginPath(),a.rect(this.mask.x,this.mask.y,this.mask.width,this.mask.height),a.clip(),a.translate(b.x,b.y));for(var h in d)a.fillText(d[h][0],d[h][1],d[h][2]);a.restore()},WASTE.Textfield.prototype.addChild=function(){},WASTE.Textfield.prototype.removeChild=function(){},WASTE.BasicButton=function(a,b,c,d,e,f){WASTE.MovieClip.call(this,a,b,c,d,e,f),this.interactive=!0},WASTE.BasicButton.prototype=Object.create(WASTE.MovieClip.prototype),WASTE.BasicButton.prototype.constructor=WASTE.BasicButton,WASTE.BasicButton.prototype.disable=function(){this.interactive=!1,this.total_frames>2&&this.gotoAndStop(2)},WASTE.BasicButton.prototype.enable=function(){this.interactive=!0,this.gotoAndStop(0)},WASTE.BasicButton.prototype.onClick=function(){},WASTE.BasicButton.prototype.onOver=function(){this.gotoAndStop(1)},WASTE.BasicButton.prototype.onOut=function(){this.gotoAndStop(0)},WASTE.InteractionManager=function(a){this.renderer=a,this.view=a.view,this.view.scope=this,this.stage=a.stage,this.clicked=!1,this.view.addEventListener("touchstart",this.clickHandler.bind(this),!1),this.view.addEventListener("click",this.clickHandler.bind(this),!1),this.view.addEventListener("mousemove",this.mousemoveHandler.bind(this),!1)},WASTE.InteractionManager.prototype.clickHandler=function(a){for(var b=a.pageX-this.view.offsetLeft-this.renderer.borderThickness,c=a.pageY-this.view.offsetTop-this.renderer.borderThickness,d=WASTE.Objects.length-1;d>-1;d--)this.checkChildrenInteraction(WASTE.Objects[d].children,b,c,!0),this.checkObjectInteraction(WASTE.Objects[d],b,c,!0)},WASTE.InteractionManager.prototype.mousemoveHandler=function(a){var b=a.pageX-this.view.offsetLeft-this.renderer.borderThickness,c=a.pageY-this.view.offsetTop-this.renderer.borderThickness;this.checkChildrenInteraction(WASTE.Objects,b,c,!1)},WASTE.InteractionManager.prototype.checkChildrenInteraction=function(a,b,c,d){for(var e=!1,f=a.length-1;f>-1&&!e;f--)this.checkChildrenInteraction(a[f].children,b,c,d),e=this.checkObjectInteraction(a[f],b,c,d)},WASTE.InteractionManager.prototype.checkObjectInteraction=function(a,b,c,d){if(b>=a._global._x&&b<=a._global._x+a._global.scaleW)if(c>=a._global._y&&c<=a._global._y+a._global.scaleH){if(a.onClick&&a.interactive&&a.visible)return d?(a.onClick(),!0):(a._over||(a._over=!0,a.onOver&&a.onOver()),document.body.style.cursor="pointer",!0)}else this.resetInteraction(a,d);else this.resetInteraction(a,d)},WASTE.InteractionManager.prototype.resetInteraction=function(a,b){b||(document.body.style.cursor="default",a._over&&(a._over=!1,a.onOut&&a.onOut()))},WASTE.Timeline=function(){this.processFrame=!1,this.fps=60,this.currentSection=0,this._sections=[],this._section=-1,this._easing=new WASTE.Easing},WASTE.Timeline.constructor=WASTE.Timeline,WASTE.Timeline.prototype.addTween=function(a,b,c,d,e,f,g){var h=e||!1;(h||0===this._sections.length)&&(this._sections.push([]),this._section++);var i={},j=this._sections[this._section];for(var k in c)i[k]={s:a[k],b:a[k],n:c[k]};var l={type:"tween",target:a,speed:b,delay:Number(d)||0,delayFrames:Math.round(d*this.fps),easing:f||"linear",onComplete:g||null,totalFrames:Math.round(b*this.fps),currentFrame:0,currentDelay:0,actions:i,reset:function(){this.currentFrame=this.currentDelay=0;for(var a in this.actions)this.target[a]=this.actions[a].s}};j.push(l)},WASTE.Timeline.prototype.addAction=function(a,b,c,d,e){var f=e||!1;(f||0===this._sections.length)&&(this._sections.push([]),this._section++);var g=this._sections[this._section],h={type:"action",target:a,delay:Number(d)||0,delayFrames:Math.round(d*this.fps),totalFrames:1,currentFrame:0,currentDelay:0,action:b,param:c};g.push(h)},WASTE.Timeline.prototype.addParam=function(a,b,c,d){var e=d||!1;(e||0===this._sections.length)&&(this._sections.push([]),this._section++);var f={},g=this._sections[this._section];for(var h in b)f[h]={s:a[h],b:a[h],n:b[h]};var i={type:"param",target:a,speed:.01,delay:Number(c)||0,delayFrames:Math.round(c*this.fps),easing:"linear",onComplete:null,totalFrames:Math.round(.01*this.fps),currentFrame:0,currentDelay:0,actions:f,reset:function(){this.currentFrame=this.currentDelay=0;for(var a in this.actions)this.target[a]=this.actions[a].s}};g.push(i)},WASTE.Timeline.prototype.addTrace=function(a,b,c){this.addAction(this,"trace",a,b,c)},WASTE.Timeline.prototype.removeTween=function(a,b){a.onComplete=a.easingFunc=a.target=null;var c=b.indexOf(a);return b.splice(c,1),!0},WASTE.Timeline.prototype.run=function(){var a=this._sections[this.currentSection];if(this.processFrame)if(a&&a.length>0){var b=a;for(var c in b){var d=a[c],e=d.target,f=d.actions;if(d.currentFrame<d.totalFrames)if(d.currentDelay<d.delayFrames)d.currentDelay++;else if("tween"===d.type){d.currentFrame++;for(var g in f)1===d.currentFrame&&(f[g].b=e[g]),e[g]=this._easing.run(d.easing)(e,d.currentFrame,f[g].b,g,f[g].n,d.totalFrames)}else if("action"===d.type)null===e?window[d.action](d.param):e[d.action](d.param),d.currentFrame++;else if("param"===d.type){d.currentFrame++;for(var h in f)e[h]=f[h].n}}}else this.currentSection++,this.currentSection>this._sections.length-1&&(this.currentSection--,this.stop())},WASTE.Timeline.prototype.play=function(a){void 0!==a&&null!==a&&(this.currentSection=a,this.reset()),this.processFrame=!0},WASTE.Timeline.prototype.stop=function(){this.processFrame=!1},WASTE.Timeline.prototype.reset=function(){for(var a in this._sections)for(var b in this._sections[a]){var c=this._sections[a][b];("tween"===c.type||"param"===c.type)&&c.reset()}},WASTE.Timeline.prototype.delay=function(){},WASTE.Timeline.prototype.trace=function(a){WASTE.trace(a)},WASTE.Easing=function(){},WASTE.Easing.constructor=WASTE.Easing,WASTE.Easing.prototype.run=function(a){switch(a){case"easeInOut":return this.easeInOutQuad;case"easeIn":return this.easeInQuad;case"easeOut":return this.easeOutQuad;case"bounce":return this.bounce;case"elasticIn":return this.elasticIn;case"elasticOut":return this.elasticOut;case"accelerate":return this.accelerate;case"decelerate":return this.decelerate;default:return this.linearTween}},WASTE.Easing.prototype.linearTween=function(a,b,c,d,e,f){var g=e-c;return g*b/f+c},WASTE.Easing.prototype.easeInQuad=function(a,b,c,d,e,f){var g=e-c;return b/=f,g*b*b+c},WASTE.Easing.prototype.easeOutQuad=function(a,b,c,d,e,f){var g=e-c;return b/=f,-g*b*(b-2)+c},WASTE.Easing.prototype.easeInOutQuad=function(a,b,c,d,e,f){var g=e-c;return b/=f/2,1>b?g/2*b*b+c:(b--,-g/2*(b*(b-2)-1)+c)},WASTE.Easing.prototype.bounce=function(a,b,c,d,e,f){var g=e-c,h=(b/=f)*b,i=h*b;return c+g*(-32.445*i*h+91.435*h*h+-86.085*i+28.095*h)},WASTE.Easing.prototype.elasticOut=function(a,b,c,d,e,f){var g=e-c,h=(b/=f)*b,i=h*b;return c+g*(56*i*h+-175*h*h+200*i+-100*h+20*b)},WASTE.Easing.prototype.elasticIn=function(a,b,c,d,e,f){var g=e-c,h=(b/=f)*b,i=h*b;return c+g*(56*i*h+-105*h*h+60*i+-10*h)},WASTE.Easing.prototype.accelerate=function(a,b,c,d,e,f){var g=e-c;return b/=f,-g*(Math.sqrt(1-b*b)-1)+c},WASTE.Easing.prototype.decelerate=function(a,b,c,d,e,f){var g=e-c;return b/=f,b--,g*Math.sqrt(1-b*b)+c};